# fattoriale(x) = x * fattoriale(x-1)
# fattoriale(1) = 1

.text
.globl main

main:
	li $v0, 5	# lettura del numero
	syscall
	move $a0, $v0	# sposto il valore in $a0
	jal RICORSIONE	# salto all funzione ricorsiva
	move $a0, $v0	# riprendo il valore dalla funzione ricorsiva
	li $v0, 1	# stampo il valore
	syscall
	li $v0, 10	# termino il programma
	syscall	
	
RICORSIONE:
	li $t0, 1	# carico il registro $t0 con il valore 1 che mi servirà con altre operazioni
	# prima cosa da afre è verificare il caso base
	# quindi se il valore letto è minore o uguale di 1 si passa al caso_base
	ble $a0, $t0, caso_base
	subu $sp, $sp, 8	# stack pointer da 8 perchè $ra e $a0
	# salvo
	sw $ra, 0($sp)
	sw $a0, 4($sp)
	# faccio (x-1)
	sub $a0, $a0, 1
	jal RICORSIONE		# si ritorna alla RICORSIONE fino a quando non si arriva nel caso base
	# aggiorno stack pointer
	lw $ra, 0($sp)
	lw $a0, 4($sp)
	addiu $sp, $sp, 8
	mul $v0, $v0, $a0	# faccio l'operazione che dovevamo fare dalla consegna, moltiplicando la x letta inizialmente con il fattoriale di (x-1)
	jr $ra
	
caso_base:
	li $v0, 1	# si carica il valore 1 come da consegna
	jr $ra
		